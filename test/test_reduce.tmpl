out() ->
    receive {_,_,{_,I}} -> io:format("G|~p|~p~n", [I,erlang:system_time()]) end,
    out().

in() -> in(0).

in(100) -> receive M -> M end;
in(I) ->
    src ! 1,
    io:format("S|~p|~p~n", [I,erlang:system_time()]),
    in(I+1).